"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = objectSetHandler;

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _triggerone = _interopRequireDefault(require("../../trigger/_triggerone"));

var _defs = _interopRequireDefault(require("../../_core/defs"));

// the function is called when data property is changed in Seemple.Object
// it delegates asterisk listener for new value
function objectSetHandler(_ref) {
  var key = _ref.key;

  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _triggerone["default"].latestEvent.info.delegatedData,
      path = _ref2.path,
      name = _ref2.name,
      callback = _ref2.callback,
      context = _ref2.context,
      info = _ref2.info,
      object = _ref2.object;

  if (key) {
    var item = object[key];

    if (item && (0, _typeof2["default"])(item) === 'object') {
      var def = _defs["default"].get(object);

      if (key in def.keys) {
        var delegateListener = require('./')["default"]; // fixing circular ref


        delegateListener(item, path, name, callback, context, info);
      }
    }
  }
}
//# sourceMappingURL=objectsethandler.js.map