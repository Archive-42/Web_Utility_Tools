'use strict';

var Init = require('./_init');

var data = require('./_data');

// adds unique nodes to mq collection
module.exports = add;
function add(selector) {
    var idMap = {};

    var result = void 0;

    var nodes = new Init(selector);

    if (this.length) {
        result = new Init();
        for (var i = 0; i < this.length; i++) {
            var node = this[i];
            var nodeID = node.b$ = node.b$ || ++data.nodeIndex; // eslint-disable-line no-plusplus
            idMap[nodeID] = 1;
            result.push(node);
        }

        for (var _i = 0; _i < nodes.length; _i++) {
            var _node = nodes[_i];
            var _nodeID = _node.b$ = _node.b$ || ++data.nodeIndex; // eslint-disable-line no-plusplus
            if (!idMap[_nodeID]) {
                idMap[_nodeID] = 1;
                result.push(_node);
            }
        }
    } else {
        result = nodes;
    }

    return result;
}
//# sourceMappingURL=add.js.map