{"version":3,"sources":["../../../src/_dom/mq/off.js"],"names":["splitBySpaceReg","splitByDotReg","off","namesStr","selector","handler","names","split","i","length","name","namespace","j","node","k","keys","Object","data","allEvents","events","l","event","nodeID","b$","removeEventListener","delegate","splice"],"mappings":";;mBAAiB,S;;AAEjB,IAAMA,kBAAkB,KAAxB;AACA,IAAMC,gBAAgB,QAAtB;;AAEA;iBACwBC,G;AAAT,SAASA,GAAT,CAAaC,QAAb,EAAuBC,QAAvB,EAAiCC,OAAjC,EAA0C;AACrD,QAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAChCC,kBAAUD,QAAV,CADgC,CACZ;AACpBA,mBAAW,IAAX,CAFgC,CAEd;AACrB;;AAED,QAAME,QAAQH,SAASI,KAAT,CAAeP,eAAf,CAAd;;AAEA,SAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIF,MAAMG,MAA1B,EAAkCD,GAAlC,EAAuC;AAAA,6BACTF,MAAME,CAAN,EAASD,KAAT,CAAeN,aAAf,CADS;AAAA,YAC5BS,IAD4B;AAAA,YACtBC,SADsB;;AAGnC,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKH,MAAzB,EAAiCG,GAAjC,EAAsC;AAClC,gBAAMC,OAAO,KAAKD,CAAL,CAAb;;AAEA,gBAAI,CAACF,IAAD,IAASC,SAAb,EAAwB;AACpB,qBAAK,IAAIG,IAAI,CAAR,EAAWC,OAAOC,OAAOD,IAAP,CAAYE,KAAKC,SAAjB,CAAvB,EAAoDJ,IAAIC,KAAKN,MAA7D,EAAqEK,GAArE,EAA0E;AACtE,wBAAMK,UAASF,KAAKC,SAAL,CAAeH,KAAKD,CAAL,CAAf,CAAf;;AAEA,yBAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAID,QAAOV,MAA3B,EAAmCW,GAAnC,EAAwC;AACpC,4BAAMC,QAAQF,QAAOX,CAAP,CAAd;AACA,4BAAIa,MAAMV,SAAN,KAAoBA,SAApB,IAAiCU,MAAMC,MAAN,KAAiBT,KAAKU,EAA3D,EAA+D;AAC3DV,iCAAKW,mBAAL,CAAyBH,MAAMX,IAA/B,EAAqCW,MAAMI,QAAN,IAAkBJ,MAAMhB,OAA7D;AACAc,oCAAOO,MAAP,CAAcN,CAAd,EAAiB,CAAjB;AACAA,iCAAK,CAAL;AACH;AACJ;AACJ;;AAED;AACH;;AAED,gBAAMD,SAASF,KAAKC,SAAL,CAAeR,OAAOG,KAAKU,EAA3B,CAAf;AACA,gBAAIJ,MAAJ,EAAY;AACR,qBAAK,IAAIL,KAAI,CAAb,EAAgBA,KAAIK,OAAOV,MAA3B,EAAmCK,IAAnC,EAAwC;AACpC,wBAAMO,SAAQF,OAAOL,EAAP,CAAd;AACA,wBACI,CAAC,CAACT,OAAD,IAAYA,YAAYgB,OAAMhB,OAA9B,IAAyCA,YAAYgB,OAAMI,QAA5D,MACI,CAACd,SAAD,IAAcA,cAAcU,OAAMV,SADtC,MAEI,CAACP,QAAD,IAAaA,aAAaiB,OAAMjB,QAFpC,CADJ,EAIE;AACES,6BAAKW,mBAAL,CAAyBd,IAAzB,EAA+BW,OAAMI,QAAN,IAAkBJ,OAAMhB,OAAvD;AACAc,+BAAOO,MAAP,CAAcZ,EAAd,EAAiB,CAAjB;AACAA,8BAAK,CAAL;AACH;AACJ;AACJ,aAbD,MAaO,IAAI,CAACH,SAAD,IAAc,CAACP,QAAnB,EAA6B;AAChCS,qBAAKW,mBAAL,CAAyBd,IAAzB,EAA+BL,OAA/B;AACH;AACJ;AACJ;;AAED,WAAO,IAAP;AACH","file":"off.js","sourcesContent":["import data from './_data';\n\nconst splitBySpaceReg = /\\s+/;\nconst splitByDotReg = /\\.(.+)/;\n\n// removes event handler from a set of elements\nexport default function off(namesStr, selector, handler) {\n    if (typeof selector === 'function') {\n        handler = selector; // eslint-disable-line no-param-reassign\n        selector = null;  // eslint-disable-line no-param-reassign\n    }\n\n    const names = namesStr.split(splitBySpaceReg);\n\n    for (let i = 0; i < names.length; i++) {\n        const [name, namespace] = names[i].split(splitByDotReg);\n\n        for (let j = 0; j < this.length; j++) {\n            const node = this[j];\n\n            if (!name && namespace) {\n                for (let k = 0, keys = Object.keys(data.allEvents); k < keys.length; k++) {\n                    const events = data.allEvents[keys[k]];\n\n                    for (let l = 0; l < events.length; l++) {\n                        const event = events[i];\n                        if (event.namespace === namespace && event.nodeID === node.b$) {\n                            node.removeEventListener(event.name, event.delegate || event.handler);\n                            events.splice(l, 1);\n                            l -= 1;\n                        }\n                    }\n                }\n\n                continue;\n            }\n\n            const events = data.allEvents[name + node.b$];\n            if (events) {\n                for (let k = 0; k < events.length; k++) {\n                    const event = events[k];\n                    if (\n                        (!handler || handler === event.handler || handler === event.delegate)\n                        && (!namespace || namespace === event.namespace)\n                        && (!selector || selector === event.selector)\n                    ) {\n                        node.removeEventListener(name, event.delegate || event.handler);\n                        events.splice(k, 1);\n                        k -= 1;\n                    }\n                }\n            } else if (!namespace && !selector) {\n                node.removeEventListener(name, handler);\n            }\n        }\n    }\n\n    return this;\n}\n"]}