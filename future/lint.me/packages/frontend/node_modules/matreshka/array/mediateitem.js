'use strict';

var initMK = require('../_core/init');

// creates item mediator
function createItemMediator(_ref) {
    var arr = _ref.arr,
        mediator = _ref.mediator;

    return function itemMediator(value, index) {
        // args: value, old value, index, array itself
        return mediator.call(arr, value, index, arr);
    };
}

// defines a "type" of every array item
module.exports = mediateItem;
function mediateItem(mediator) {
    var def = initMK(this);
    var length = this.length;

    // store itemMediator in object definition

    var itemMediator = def.itemMediator = createItemMediator({
        arr: this,
        mediator: mediator
    });

    // convert existing items
    for (var i = 0; i < length; i++) {
        this[i] = itemMediator(this[i], i);
    }

    return this;
}
//# sourceMappingURL=mediateitem.js.map