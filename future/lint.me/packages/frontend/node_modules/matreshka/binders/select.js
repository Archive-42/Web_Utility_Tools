'use strict';

// returns a binder for select element
module.exports = select;
function select(multiple) {
    if (multiple) {
        return {
            on: 'change',
            getValue: function () {
                var options = this.options;

                var result = [];

                for (var i = 0; options.length > i; i++) {
                    if (options[i].selected) {
                        result.push(options[i].value);
                    }
                }

                return result;
            },
            setValue: function (givenValue) {
                var options = this.options;

                var value = typeof givenValue === 'string' ? [givenValue] : givenValue;
                for (var i = options.length - 1; i >= 0; i--) {
                    options[i].selected = ~value.indexOf(options[i].value);
                }
            }
        };
    }

    return {
        on: 'change',
        getValue: function () {
            return this.value;
        },
        setValue: function (value) {
            this.value = value;

            if (!value) {
                var options = this.options;

                for (var i = options.length - 1; i >= 0; i--) {
                    if (!options[i].value) {
                        options[i].selected = true;
                        break;
                    }
                }
            }
        }
    };
}
//# sourceMappingURL=select.js.map