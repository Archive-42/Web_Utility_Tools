'use strict';

var initMK = require('../_core/init');

// converts Matreshka.Object instance to ordinary object
module.exports = toJSON;
function toJSON() {
    var _this = this;

    var recursive = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

    var _initMK = initMK(this),
        keys = _initMK.keys;

    var result = {};

    for (var _target = keys, _keys = Object.keys(_target), _i = 0, key, _, _l = _keys.length; (key = _keys[_i], _ = _target[key]), _i < _l; _i++) {
        var value = _this[key];
        // when recursive is true and when value has toJSON method then call it recusively
        if (recursive && value && typeof value.toJSON === 'function') {
            result[key] = value.toJSON(true);
        } else {
            result[key] = value;
        }
    }

    return result;
}
//# sourceMappingURL=tojson.js.map