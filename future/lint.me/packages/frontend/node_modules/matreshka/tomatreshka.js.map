{"version":3,"sources":["../src/tomatreshka.js"],"names":["toMatreshka","data","MatreshkaObject","require","MatreshkaArray","arrayItems","Array","length","index","item","recreate","object","key","value"],"mappings":";;AAAA;iBACwBA,W;AAAT,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACtC;AACA,QAAMC,kBAAkBC,QAAQ,UAAR,CAAxB;AACA,QAAMC,iBAAiBD,QAAQ,SAAR,CAAvB;;AAEA;AACA,QAAIF,QAAQ,OAAOA,IAAP,KAAgB,QAA5B,EAAsC;AAAA;AAClC,gBAAI,YAAYA,IAAhB,EAAsB;AAAA;AAClB;AACA,wBAAMI,aAAaC,MAAML,KAAKM,MAAX,CAAnB;;AAFkB,uCAILN,IAJK,EAIQO,KAJR,MAIEC,IAJF,uBAIEA,IAJF,WAIQD,KAJR,GAIQA,KAJR,OAIQA,KAJR,IAIkB;AAChCH,mCAAWG,KAAX,IAAoBR,YAAYS,IAAZ,CAApB;AACH;;AAED;AAAA;AAAA,+BAAO,IAAIL,cAAJ,GAAqBM,QAArB,CAA8BL,UAA9B;AAAP;AAAA;AARkB;;AAAA;AASrB;;AAED;AACA,gBAAMM,SAAS,EAAf;;AAbkC,gCAetBV,IAfsB,yCAeRW,GAfQ,EAefC,KAfe,uBAeRD,GAfQ,cAefC,KAfe,YAeRD,GAfQ,oBAeA;AAC9BD,uBAAOC,GAAP,IAAcZ,YAAYa,KAAZ,CAAd;AACH;;AAED;AAAA,mBAAO,IAAIX,eAAJ,CAAoBS,MAApB;AAAP;AAnBkC;;AAAA;AAoBrC;;AAED;AACA,WAAOV,IAAP;AACH","file":"tomatreshka.js","sourcesContent":["// recursively converts objects and arrays to Matreshka.Object and Matreshka.Array instances\nexport default function toMatreshka(data) {\n    // fix circular ref issue\n    const MatreshkaObject = require('./object');\n    const MatreshkaArray = require('./array');\n\n    // convert only objects\n    if (data && typeof data === 'object') {\n        if ('length' in data) {\n            // if length is given convert it to Matreshka.Array instance\n            const arrayItems = Array(data.length);\n\n            nofn.forEach(data, (item, index) => {\n                arrayItems[index] = toMatreshka(item);\n            });\n\n            return new MatreshkaArray().recreate(arrayItems);\n        }\n\n        // if length is not given convert it to Matreshka.Object instance\n        const object = {};\n\n        nofn.forOwn(data, (value, key) => {\n            object[key] = toMatreshka(value);\n        });\n\n        return new MatreshkaObject(object);\n    }\n\n    // for all non-objects just return passed data\n    return data;\n}\n"]}