"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = onDebounce;

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _on = _interopRequireDefault(require("./on"));

var _checkobjecttype = _interopRequireDefault(require("./_helpers/checkobjecttype"));

var _debounce = _interopRequireDefault(require("./_helpers/debounce"));

var _forown = _interopRequireDefault(require("./_helpers/forown"));

// adds debounced event listener
function onDebounce(object, names, givenCallback, givenDelay, triggerOnInit, context) {
  if ((0, _typeof2["default"])(this) === 'object' && this.isSeemple) {
    // when context is Seemple instance, use this as an object and shift other args

    /* eslint-disable no-param-reassign */
    context = triggerOnInit;
    triggerOnInit = givenDelay;
    givenDelay = givenCallback;
    givenCallback = names;
    names = object;
    object = this;
    /* eslint-enable no-param-reassign */
  } else {
    // throw error when object type is wrong
    (0, _checkobjecttype["default"])(object, 'onDebounce');
  }

  var isNamesVarArray = names instanceof Array; // allow to pass name-handler object

  if (names && (0, _typeof2["default"])(names) === 'object' && !isNamesVarArray) {
    (0, _forown["default"])(names, function (namesObjCallback, namesObjName) {
      return onDebounce(object, namesObjName, namesObjCallback, givenCallback, givenDelay, triggerOnInit);
    });
    return object;
  }

  var delay = typeof givenDelay === 'number' ? givenDelay : 0;
  var callback = (0, _debounce["default"])(givenCallback, delay); // allow to remove event listener py passing original callback to "off"

  callback._callback = givenCallback;
  return (0, _on["default"])(object, names, callback, triggerOnInit, context);
}
//# sourceMappingURL=ondebounce.js.map